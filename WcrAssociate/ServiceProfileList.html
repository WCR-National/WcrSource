<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="images/favicon.ico" />
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css?ver=5.2.2' type='text/css' media='all' />
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/layout.css" type="text/css" rel="stylesheet">
    <script src="js/jquery-2.1.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/rateYo/2.2.0/jquery.rateyo.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/rateYo/2.2.0/jquery.rateyo.min.js">
    </script>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD8qzg6u0Yh20dcMnAyZ4A8dExFXfzQb_c&sensor=false">
    </script>
    <title></title>
</head>
<body class="innerpage">
    <div>
        <div class="modal fade small-model" id="success-message" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-body form-horizontal no-padding">
                        <div class="alert alert-success no-radius alert-dismissible no-margin " role="alert">
                            <button type="button" class="close align-with-two-line" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <strong> <label id="lblSuccess"></label> </strong>  <br />
                            <label id="lbldetail" class="running-text"></label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade small-model" id="fail_message" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-body form-horizontal no-padding">
                        <div class="alert alert-danger no-radius alert-dismissible no-margin " role="alert">
                            <button type="button" class="close align-with-two-line" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <strong> <label id="lblFailureTitle"></label> </strong>  <br />
                            <label id="lblFailureDetail" class="running-text"></label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="page-wrap">
        <div id="pageloader" class="pageloader" style="display:none">
            <div class="pageloader-inner">
                <div class="lds-spinner"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>
            </div>
        </div>
        <div class="header"></div>
        <div class="container result">
            <div class="row">
                <div class="col-lg-10 col-md-10 col-sm-10 col-xs-12 col-sm-offset-1  col-xs-offset-0  col-md-offset-1 col-lg-offset-1 searchbar ">
                    <h3 class="text-center" id="toplogo" style="display:block">
                        <a href="JavaScript:void(0);" name="wcrServiceLink1"><img src="img/wcr-logo.png" class="img-responsive logo" alt=""></a>
                    </h3>
                    <div class="container result" style="display:none" id="DivSearchAds">
                        <div class="row">
                            <div class="col-lg-10 col-md-10 col-sm-10 col-xs-12 col-sm-offset-1 text-center col-xs-offset-0  col-md-offset-1 col-lg-offset-1 searchbar">
                                <div id="dlogo">
                                    <h3>  <a href="JavaScript:void(0);" name="wcrServiceLink">    <img src="img/wcr-logo.png" style="margin-bottom:25px;" class="img-responsive" alt="">  </a> </h3>
                                </div>
                            </div>
                        </div>
                        <div class="row" id="sales">
                        </div>
                        <div class="row" id="Services">
                        </div>
                    </div>
                    <div class="container result" id="divShowAdvertisement" style="display:none;">
                        <div class="container result" id="search-result">
                            <div class="row">
                                <div class="col-sm-12 searchbar ">
                                    <h3 class="text-center"><a name="logolink" href="JavaScript:void(0);"><img src="img/wcr-logo.png" class="img-responsive logo" alt=""></a></h3>
                                    <div id="sales1">
                                    </div>
                                    <div id="services1">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 ">
                            <div id="divAdtsDetail">
                            </div>
                            <div class="modal fade" id="choose-consumer" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                            <h4 class="modal-title" id="myModalLabel"> In order to complete this action <br />you must sign-in.</h4>
                                        </div>
                                        <div class="modal-body form-horizontal">
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                <div class="loader-wrap" id="LoadingImageLoginconsuer" style="display: none;">
                                                    <div class="loader"><span class="loader-item"></span><span class="loader-item"></span><span class="loader-item"></span><span class="loader-item"></span><span class="loader-item"></span><span class="loader-item"></span><span class="loader-item"></span><span class="loader-item"></span><span class="loader-item"></span><span class="loader-item"></span></div>
                                                </div>
                                            </div>
                                            <div class="clearfix"></div>
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                <p id="userloginValidation" style="display:none;" class="invalid">Email or password can not be empty.</p>
                                                <div class="form-group">
                                                    <input type="text" id="EmailAddress" class="form-control" maxlength="50" placeholder="Enter Email Address">
                                                </div>
                                                <div class="form-group">
                                                    <input type="password" id="Password" class="form-control" maxlength="20" placeholder="Password">
                                                </div>
                                                <p id="loginFailedmsg1" style="display:none;" class="invalid">User Authentication Failed. Please verify your credentials</p>
                                                <div class="form-group text-center">
                                                    <input id="btnLogin1" type="button" class="btn-primary btn pull-left" value="Submit" />
                                                    <label class="forget-pass"> <a href="#" data-toggle="modal" id="aforgottxt" data-dismiss="modal" data-target="#forgotPassword1"> Forgot Password </a> </label>
                                                    <input id="btnCreateNew" data-toggle="modal" data-dismiss="modal" data-target="#choose-registration" data-backdrop="static" data-keyboard="false" type="button" class="btn-link pull-right " value="Create An Account" />

                                                </div>
                                            </div>
                                            <div class="clearfix"></div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                            <div class="modal fade " id="forgotPassword1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                            <h3 class="modal-title text-left" id="myModalLabel"> <strong> Forgot your password? </strong> </h3>
                                            <p> Enter your WCR user email address</p>
                                            <p id="Notfound1"></p>
                                            <h5 id="msgforgot" style="display:none; color:red;">Unidentified Email address-Please Re-Enter</h5>
                                        </div>
                                        <div class="modal-body form-horizontal">
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                <div class="form-group">
                                                    <input type="text" id="Forgetusername1" style="text-transform:lowercase" class="form-control" maxlength="50" placeholder="Enter Email Address">
                                                </div>
                                                <div class="form-group">
                                                    <input id="btnForgotPasswd1" type="button" class="btn btn-primary" value="RESET PASSWORD" />
                                                </div>
                                            </div>
                                            <div class="clearfix"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal fade" id="choose-registration" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                            <h4 class="modal-title" id="myModalLabel">Please submit the following information.</h4>
                                        </div>
                                        <div id="pageloader1" class="pageloader" style="display:none">
                                            <div class="pageloader-inner">
                                                <div class="lds-spinner"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>
                                            </div>
                                        </div>
                                        <div class="modal-body form-horizontal">
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                <div class="form-group">
                                                    <input type="text" id="FirstName" autocomplete="off" class="form-control" maxlength="50" placeholder="First Name">
                                                </div>
                                                <div class="form-group">
                                                    <p id="mobvalidataion" style="display:none;"></p>
                                                    <input type="text" id="mobile" autocomplete="off" class="form-control" maxlength="10" placeholder="Enter Mobile Number">
                                                </div>
                                                <div class="form-group">
                                                    <input type="text" id="EmailAddressReg" autocomplete="off" class="form-control" maxlength="50" placeholder="Enter Email Address">
                                                    <p id="mailvalidation1" style="display:none;" class="invalid">Email is not in correct format.</p>
                                                    <p id="duplicateEmail" style="display:none; color:red;">This EmailID is not available.Please Try another one.</p>
                                                </div>
                                                <div class="form-group">
                                                    <input type="password" id="RPassword" class="form-control" maxlength="20" placeholder="Password">
                                                    <div id="message1" class="alert alert-default" style="display:none;">
                                                        <h5> <strong> Password must contain the following: </strong> </h5>
                                                        <p id="letter1" class="invalid">A lowercase letter</p>
                                                        <div class="clearfix"></div>
                                                        <p id="capital1" class="invalid">A capital (uppercase) letter</p>
                                                        <div class="clearfix"></div>
                                                        <p id="number1" class="invalid">A number</p>
                                                        <div class="clearfix"></div>
                                                        <p id="length1" class="invalid">Minimum of 8 char & a max of 20 char in length</p>
                                                        <div class="clearfix"></div>
                                                        <p id="specialcharacter1" class="invalid">1 special character in ! @ # $ % ^ * _ </p>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <input type="password" id="cPassword" class="form-control" maxlength="20" placeholder="Confirm Password">
                                                    <div id="mismatchpass1" class="alert m-t-15 alert-default" style="display:none;">
                                                        <p class="invalid">Passwords Do Not Match </p>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <input id="btnRegistration" type="button" class="btn-primary pull-left btn" value="Submit" />
                                                    <input id="btnCancel" data-toggle="modal" data-dismiss="modal" data-target="#choose-consumer" data-backdrop="static" data-keyboard="false" type="button" class="btn-primary btn pull-right" value="Cancel" />
                                                    <input type="hidden" id="logfails" value="0" />
                                                </div>
                                            </div>
                                            <div class="clearfix"></div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                            <input type="hidden" id="hidLogin" />
                            <input type="hidden" id="hidAdvertisementID" />
                            <input type="hidden" id="hidAssociateID" />
                            <input type="hidden" id="hidDataModelID" /> <!--This id will be used when consumer will click either in contact associate(1) button or in Bookmark(2)-->
                            <input type="hidden" id="hidZipcodeID" />
                            <input type="hidden" id="hidjobtypeID" />
                            <input type="hidden" id="hidpanelID" />
                            <input type="hidden" id="hidbookmarkContactAssociate" />
                            <div class="modal fade " id="emailVerification1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" id="btnActClose" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                            <h4 class="modal-title text-left" id="myModalLabel"> Account Activation </h4>
                                            <br />
                                            <span style="font-family:Verdana;">Activation code was sent to the Email address that was supplied for this account</span>
                                        </div>
                                        <div class="modal-body form-horizontal">
                                            <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
                                                Enter Activation Code:- <input type="text" id="txtEmailVerification1" /> <br /><br />
                                                Resend New Activation Code: <a href="#" id="btnresend1">Resend</a>
                                            </div>
                                            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                                <input type="button" id="btnVerification1" value="Verify" class="btn btn-primary" /><br />
                                                <label id="lblSuccess2" style="color:red"></label>
                                            </div>
                                            <div class="clearfix"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal fade" id="completeConsumerProfile" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                            <h4 class="modal-title" id="myModalLabel"> Your Profile is incomplete<br />In order to complete this action, please enter the required information.</h4>
                                        </div>
                                        <div class="modal-body form-horizontal">
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                <div class="form-group" id="divFname" style="display:none;">
                                                    <input type="text" id="conName" class="form-control" maxlength="50" placeholder="First Name">
                                                </div>
                                                <div class="form-group" style="display:none;">
                                                    <input type="text" id="conMobile" class="form-control" maxlength="15" placeholder="Mobile No">
                                                </div>
                                                <div class="form-group" style="display:none;">
                                                    <input type="text" id="conEmail" style="text-transform:lowercase" class="form-control" maxlength="15" placeholder="Enter Email Address">
                                                </div>
                                                <div class="form-group">
                                                    <input id="btnUpdate" type="button" class="btn-primary btn pull-left" value="Submit" />
                                                </div>
                                            </div>
                                            <div class="clearfix"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <input type="hidden" class="form-control" id="lbluserName1">
    <input type="hidden" class="form-control" id="lblpassword1">
    <div class="footer"></div>
</body>
</html>
<script src="js/customjs.js"></script>
<script>
    $(function () {
        ViewDiv();
        var d = CheckUserLogin();
        if (d == 0) {
            hidLogin.value = "0";
            $('.header').load("headerWithoutLogin.html");
        }
        else {
            hidLogin.value = "1";
            $('.header').load("consumerHeader.html");
        }
        $('.footer').load("consumerFooter.html");
    });
    $(document).on('keypress', '#txtSearch', function (e) {
        if (e.keyCode == 13) {  // detect the enter key
            if (txtSearch.value == "") {
                $("#lblfai").css("display", "block");
                $("#lblfai").text("Please enter City, State OR Zip Code.");
            }
            else {
                $("#pageloader").css("display", "block");
                $("#homeicon").css("display", "inline-block");
                setTimeout(function () {
                    Searching();
                }, 500);
            }

        }
    });


    $(document).on("click", "a[name='tpsrc']", function (e) {
        if (txtSearch.value == "") {
            $("#lblfai").css("display", "block");
            $("#lblfai").text("Please enter City, State OR Zip Code.");
        }
        else {
            $("#pageloader").css("display", "block");
            $("#homeicon").css("display", "inline-block");
            setTimeout(function () {
                Searching();
            }, 500);
        }
    });
    function Searching() {
        $("#lblfai").css("display", "none");
        if (txtSearch.value == "") {
            $("#lblfai").css("display", "block");
            $("#lblfai").text("Please enter City, State OR Zip Code.");
        }
        else {
            $("#divBody").addClass("result");
            var zipc = txtSearch.value;
            if ($.isNumeric($('#txtSearch').val())) {
                HideDiv();
                $("#DivSearchAds").css("display", "block");
                $("#divShowAdvertisement").css("display", "none");
                var sales = BindSalesCategory(zipc);
                $("#sales").html(sales.join(''));
                var services1 = BindServiesCategory(zipc);
                $("#Services").html(services1.join(''));
            }
            else {
                if (zipc.indexOf(',') != -1) {
                    HideDiv();
                    var strs;
                    var State;
                    var City;
                    strs = zipc.split(',');
                    for (var i = 0; i < strs.length; i++) {
                        if (i == 0) {
                            City = strs[i];
                        }
                        else if (i == 1) {
                            State = $.trim(strs[i]);
                        }
                    }
                    if (State.length == 2) {
                        $("#DivSearchAds").css("display", "block");
                        $("#divShowAdvertisement").css("display", "none");
                        var sales = BindSalesCategoryCityWise(State, City);
                        $("#sales").html(sales.join(''));
                        var services1 = BindServiesCategoryCityWise(State, City);
                        $("#Services").html(services1.join(''));
                    }
                    else if (State.length >= 2) {
                        $("#lblfai").css("display", "block");
                        $("#lblfai").text("Please Enter 2 Characters for State.");
                    }
                }
                else {
                    $("#lblfai").css("display", "block");
                    $("#lblfai").text("Invalid data entered.  Please enter City, State OR Zip Code.");
                }
            }

        }
        hideLoader();
    }
    function hideLoader() {
        $("#pageloader").css("display", "none");
    }
    //function Searching() {
    //    HideDiv();
    //    $("#divBody").addClass("result");
    //    var zipc = txtSearch.value;
    //    if (zipc.indexOf(',') != -1) {
    //        var strs;
    //        var State;
    //        var City;
    //        strs = zipc.split(',');
    //        for (var i = 0; i < strs.length; i++) {
    //            if (i == 0) {
    //                City = strs[i];
    //            }
    //            else if (i == 1) {
    //                State = strs[i];
    //            }
    //        }
    //        $("#DivSearchAds").css("display", "block");
    //        $("#divShowAdvertisement").css("display", "none");
    //        var sales = BindSalesCategoryCityWise(State, City);
    //        $("#sales").html(sales.join(''));
    //        var services1 = BindServiesCategoryCityWise(State, City);
    //        $("#Services").html(services1.join(''));
    //    }
    //    else {
    //        $("#DivSearchAds").css("display", "block");
    //        $("#divShowAdvertisement").css("display", "none");
    //        var sales = BindSalesCategory(zipc);
    //        $("#sales").html(sales.join(''));

    //        var services1 = BindServiesCategory(zipc);
    //        $("#Services").html(services1.join(''));
    //    }
    //}
    $(document).on("click", "a[name='wcrServiceLink']", function (e) {
        $("#divBody").addClass("result");
        $("#DivWithoutSearchAds").css("display", "none");
        $("#DivSearchAds").css("display", "none");
        $("#divShowAdvertisement").css("display", "block");
        $("#pageloader").css("display", "block");
        $("#lblfai").css("display", "none");
        setTimeout(function () {
            GetSalesAdts();
        }, 2500);
    });

    $(document).on("click", "a[name='wcrServiceLink1']", function (e) {
        $("#divBody").addClass("result");
        $("#toplogo").css("display", "none");
        $("#DivSearchAds").css("display", "none");
        $("#divAdtsDetail").css("display", "none");
        $("#divShowAdvertisement").css("display", "block");
        $("#pageloader").css("display", "block");
        $("#lblfai").css("display", "none");
        setTimeout(function () {
            GetSalesAdts();
        }, 2500);
    });
    function GetSalesAdts() {
        var _IPAddress;
        $.getJSON("http://jsonip.com?callback=?", function (data) {
            _IPAddress = data.ip;
            $.ajax({
                type: "POST", url: "ws/TopSearch.asmx/GetZipCodeIpAddress",
                data: "{'_IpAddress':'" + _IPAddress + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                async: false,
                success: function (r) {
                    if (r.d.length > 0) {
                        var salesn = BindSalesCategory1(r.d);
                        $("#sales1").html(salesn.join(''));
                        var servicesn = BindServiesCategory1(r.d);
                        $("#services1").html(servicesn.join(''));
                    }
                },
                failure: function (response) {
                    alert(response.d + "Fail");
                },
                error: function (response) {
                    alert(response.d + "Error...");
                }
            });
        });
        hideLoader();
    }
    function ViewDiv() {
        $("#toplogo").css("display", "block");
        $("#divAdtsDetail").css("display", "block");

    }
    function HideDiv() {
        $("#toplogo").css("display", "none");
        $("#divAdtsDetail").css("display", "none");
    }


</script>

<script>
    //$('#choose-consumer').on('show.bs.modal', function (e) {
    //    var parameterValue = e.relatedTarget.dataset.yourparameter;
    //    hidDataModelID.value = parameterValue;
    //});
    $(document).ready(function () {
        $('#EmailAddressReg').prop('disabled', true);
        $("#mobile").change(function (e) {
            var Moblength = $("#mobile").val();
            if (Moblength.length != 10) {
                $("#mobvalidataion").css({ "display": "block", "color": "red" });
                $("#mobvalidataion").text("Please enter correct value in Mobile box!");
                $('#EmailAddressReg').prop('disabled', true);
                $("#mobile").focus();
            }
            else if (!isNaN(mobile.value) == "") {
                $("#mobvalidataion").css({ "display": "block", "color": "red" });
                $("#mobile").val("Characters not allowed in Mobile Number!");
                $('#EmailAddressReg').prop('disabled', true);
                $("#mobile").focus();
            }
            else {
                $("#mobvalidataion").css("display", "none");
                $("#mobvalidataion").val(' ');
                $('#EmailAddressReg').prop('disabled', false);
                $('#EmailAddressReg').focus();
            }
        });
        $("#btnActClose").click(function () {
            window.location.reload();
        });
        var zipcode = GetParameterValues('zipcode');
        var id = GetParameterValues('id');
        hidAdvertisementID.value = id;
        var categoryName = GetParameterValues('catName');
        function GetParameterValues(param) {
            var url = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
            for (var i = 0; i < url.length; i++) {
                var urlparam = url[i].split('=');
                if (urlparam[0] == param) {
                    return urlparam[1];
                }
            }
        }
        BindServiesList(zipcode, id, categoryName);



        //$("#btnLogin1").click(function (e) {
        //    //var zipcode = GetParameterValues('zipcode');
        //    //function GetParameterValues(param) {
        //    //    var url = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
        //    //    for (var i = 0; i < url.length; i++) {
        //    //        var urlparam = url[i].split('=');
        //    //        if (urlparam[0] == param) {
        //    //            return urlparam[1];
        //    //        }
        //    //    }
        //    //}
        //    var filter = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
        //    if (EmailAddress.value == '' || Password.value == '') {
        //        $("#userloginValidation").text(" Email or password can not be empty.");
        //        $("#userloginValidation").css("display", "block");
        //    }
        //    else if (!filter.test($('#EmailAddress').val())) {
        //        $("#userloginValidation").text("Please Enter Correct Email Address.");
        //        $("#userloginValidation").css("display", "block");
        //        $("#EmailAddress").focus();
        //    }
        //    else {
        //        $("#userloginValidation").css("display", "none");
        //        var uname = EmailAddress.value;
        //        var pass = Password.value;
        //        $(document).on({
        //            ajaxStart: function () {
        //                showLoaderLogin();
        //            },
        //            ajaxStop: function () {
        //                hideLoaderLogin();
        //            }
        //        });
        //        $.ajax({
        //            type: "POST",
        //            url: "ws/AssociateRegistration.asmx/ConsumerAccountExists",
        //            data: "{'EmailID':'" + uname + "'}",
        //            contentType: "application/json; charset=utf-8",
        //            dataType: "json",
        //            async: true,
        //            success: function (response) {
        //                if (response.d.length > 0) {
        //                    var xmlDoc1 = $.parseXML(response.d);
        //                    var xml1 = $(xmlDoc1);
        //                    var docs1 = xml1.find("consumerExists");
        //                    $.each(docs1, function (i, docs1) {
        //                        if ($(docs1).find("AccountId").text() == "0") {
        //                            $('#incorrectauthentication').removeClass("valid");
        //                            $('#incorrectauthentication').addClass("invalid");
        //                            $("#incorrectauthentication").text("User Authentication Failed. Please verify your credentials and retry log-in.");
        //                            $('#incorrectauthentication').css("display", "block");
        //                            return false;
        //                        }
        //                        else if ($(docs1).find("Status").text() == "0") {
        //                            emailAddress.value = uname;
        //                            lblpassword.value = pass;
        //                            lbluserName.value = uname;
        //                            lbluserType.value = 2;
        //                            jQuery.noConflict();
        //                            // $('#emailVerification1').modal('show');
        //                            $('#emailVerification1').modal({ backdrop: 'static', keyboard: false });
        //                            $('#choose-consumer').modal('hide');
        //                        }
        //                        else {
        //                            $.ajax({
        //                                type: "POST",
        //                                url: "ws/AssociateRegistration.asmx/ConsumerLogin",
        //                                data: "{'EmailID':'" + uname + "','Password':'" + pass + "'}",
        //                                contentType: "application/json; charset=utf-8",
        //                                dataType: "json",
        //                                async: false,
        //                                success: function (responselog) {
        //                                    if (responselog.d.length > 0) {
        //                                        var xmlDoclog1 = $.parseXML(responselog.d);
        //                                        var xmllog1 = $(xmlDoclog1);
        //                                        var docslog1 = xmllog1.find("consumerLogin");
        //                                        $.each(docslog1, function (i, docslog1) {
        //                                            if ($(docslog1).find("Id").text() == "-1") {
        //                                                jQuery.noConflict();
        //                                                $('#choose-consumer').modal('hide');
        //                                                $("#lblFailureTitle").text("User Authentication Failed.");
        //                                                $("#lblFailureDetail").text("Please verify your credentials and retry log-in.");
        //                                                $('#fail_message').modal('show');
        //                                                return false;
        //                                            }
        //                                            else if ($(docslog1).find("Flag").text() == "1") {
        //                                                $.ajax({
        //                                                    type: "POST",
        //                                                    url: "ws/AssociateRegistration.asmx/ConsumerLoginSessionActivate",
        //                                                    data: "{'username':'" + uname + "','assoID':'" + $(docslog1).find("Id").text() + "'}",
        //                                                    contentType: "application/json; charset=utf-8",
        //                                                    dataType: "json",
        //                                                    async: false,
        //                                                    success: function (r2) {
        //                                                        if (r2.d == "1") {
        //                                                            $.ajax({
        //                                                                type: "POST", url: "ws/ConsumerRegistration.asmx/SelectConsumerDetail",
        //                                                                data: "{}", contentType: "application/json; charset=utf-8", dataType: "json", async: true,
        //                                                                success: function (rcd) {
        //                                                                    if (rcd.d.length > 0) {
        //                                                                        var xmlDoccd = $.parseXML(rcd.d);
        //                                                                        var xmlcd = $(xmlDoccd);
        //                                                                        var docscd = xmlcd.find("ConsumerDetail");
        //                                                                        $.each(docscd, function (i, docscd) {
        //                                                                            if ($(docscd).find("name").text() == "0") {
        //                                                                                e.preventDefault();
        //                                                                                jQuery.noConflict();
        //                                                                                //$('#completeConsumerProfile').modal('show');
        //                                                                                $('#completeConsumerProfile').modal({ backdrop: 'static', keyboard: false });
        //                                                                                $("#divFname").css("display", "block");
        //                                                                            }
        //                                                                            else {
        //                                                                                $("#emailVerification1").modal("hide");
        //                                                                                hidLogin.value = "1";
        //                                                                                if (hidDataModelID.value == "1") {
        //                                                                                    InterestedConsumers(hidAdvertisementID.value + ',' + hidAssociateID.value + ',' + 2 + ',' + zipcode);
                                                                                            
        //                                                                                    $("#msg" + hidpanelID.value).css("display", "block");
        //                                                                                    setTimeout(function () {
        //                                                                                        window.location.reload();
        //                                                                                    }, 2000);
        //                                                                                }
        //                                                                                else {                                                                                            
        //                                                                                    BookMarkInsert(hidAdvertisementID.value);
        //                                                                                    //$("#choose-consumer").modal("hide");
        //                                                                                    //$("#emailVerification1").modal("hide");
        //                                                                                    alert("Advertisement bookmarked successfully.");
        //                                                                                    setTimeout(function () {
        //                                                                                        window.location.reload();
        //                                                                                    }, 2000);
        //                                                                                }
        //                                                                                // window.location.reload();
        //                                                                            }
        //                                                                        });
        //                                                                    }
        //                                                                },
        //                                                                failure: function (response) {
        //                                                                    alert(response.d + "Fail");
        //                                                                },
        //                                                                error: function (response) {
        //                                                                    alert(response.d + "Error...");
        //                                                                }
        //                                                            });
        //                                                        }
        //                                                    }
        //                                                });

        //                                            }
        //                                        });
        //                                    }
        //                                }
        //                            });
        //                        }

        //                    });
        //                }
        //                else {
        //                    jQuery.noConflict();
        //                    $('#choose-consumer').modal('hide');
        //                    $("#lblFailureTitle").text("User Authentication Failed.")
        //                    $("#lblFailureDetail").text("Please verify your credentials and retry log-in.")
        //                    $('#fail_message').modal('show');
        //                    return false;
        //                }
        //            }
        //        });
        //    }
        //});


        function showLoaderLoginCon() {
            $("#LoadingImageLoginconsuer").css("display", "block");
        }
        function hideLoaderLoginCon() {
            setTimeout(function () {
                $("#LoadingImageLoginconsuer").css("display", "none");
            }, 1000);
        }
        $("#btnLogin1").click(function (e) {
            var filter = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
            if (EmailAddress.value == '' || Password.value == '') {
                $("#userloginValidation").text(" Email or password can not be empty.");
                $("#userloginValidation").css("display", "block");
            }
            else if (!filter.test($('#EmailAddress').val())) {
                $("#userloginValidation").text("Please Enter Correct Email Address.");
                $("#userloginValidation").css("display", "block");
                $("#EmailAddress").focus();
            }
            else {
                $("#userloginValidation").css("display", "none");
                var uname = EmailAddress.value;
                var pass = Password.value;
                $(document).on({
                    ajaxStart: function () {
                        showLoaderLoginCon();
                    },
                    ajaxStop: function () {
                        hideLoaderLoginCon();
                    }
                });
                $.ajax({
                    type: "POST",
                    url: "ws/AssociateRegistration.asmx/ConsumerAccountExists",
                    data: "{'EmailID':'" + uname + "'}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: true,
                    success: function (response) {
                        if (response.d.length > 0) {
                            var xmlDoc1 = $.parseXML(response.d);
                            var xml1 = $(xmlDoc1);
                            var docs1 = xml1.find("consumerExists");
                            $.each(docs1, function (i, docs1) {
                                if ($(docs1).find("AccountId").text() == "0") {
                                    jQuery.noConflict();
                                    $("#loginFailedmsg1").css("display", "block");
                                    logfails.value = 2;
                                    return false;
                                }
                                else if ($(docs1).find("Status").text() == "0" && $(docs1).find("IsEmailVerified").text() == "0") {
                                    lblpassword1.value = pass;
                                    lbluserName1.value = uname;
                                    jQuery.noConflict();
                                    $('#emailVerification1').modal({ backdrop: 'static', keyboard: false });
                                    $('#choose-consumer').modal('hide');
                                }
                                else if ($(docs1).find("Status").text() == "0" && $(docs1).find("IsEmailVerified").text() == "1") {
                                    $("#loginFailedmsg1").text("Your Account has been deactivated. Contact support at: support@wcrnational.com or 866.456.7331");
                                    $("#loginFailedmsg1").css("display", "block");
                                }
                                else {
                                    $.ajax({
                                        type: "POST",
                                        url: "ws/AssociateRegistration.asmx/ConsumerLogin",
                                        data: "{'EmailID':'" + uname + "','Password':'" + pass + "'}",
                                        contentType: "application/json; charset=utf-8",
                                        dataType: "json",
                                        async: false,
                                        success: function (responselog) {
                                            if (responselog.d.length > 0) {
                                                var xmlDoclog1 = $.parseXML(responselog.d);
                                                var xmllog1 = $(xmlDoclog1);
                                                var docslog1 = xmllog1.find("consumerLogin");
                                                $.each(docslog1, function (i, docslog1) {
                                                    if ($(docslog1).find("Id").text() == "-1") {
                                                        jQuery.noConflict();
                                                        $("#loginFailedmsg1").css("display", "block");
                                                        logfails.value = 2;
                                                        return false;
                                                    }
                                                    else if ($(docslog1).find("Flag").text() == "1") {
                                                        $.ajax({
                                                            type: "POST",
                                                            url: "ws/AssociateRegistration.asmx/ConsumerLoginSessionActivate",
                                                            data: "{'username':'" + uname + "','assoID':'" + $(docslog1).find("Id").text() + "'}",
                                                            contentType: "application/json; charset=utf-8",
                                                            dataType: "json",
                                                            async: false,
                                                            success: function (r2) {
                                                                if (r2.d == "1") {
                                                                    $.ajax({
                                                                        type: "POST", url: "ws/ConsumerRegistration.asmx/SelectConsumerDetail",
                                                                        data: "{}", contentType: "application/json; charset=utf-8", dataType: "json", async: true,
                                                                        success: function (rcd) {
                                                                            if (rcd.d.length > 0) {
                                                                                var xmlDoccd = $.parseXML(rcd.d);
                                                                                var xmlcd = $(xmlDoccd);
                                                                                var docscd = xmlcd.find("ConsumerDetail");
                                                                                $.each(docscd, function (i, docscd) {
                                                                                    if ($(docscd).find("name").text() == "0") {
                                                                                        e.preventDefault();
                                                                                        jQuery.noConflict();
                                                                                        $('#completeConsumerProfile').modal('show');
                                                                                        $("#divFname").css("display", "block");
                                                                                    }
                                                                                    else {
                                                                                        hidLogin.value = "1";
                                                                                        if (hidDataModelID.value == "1") {
                                                                                            InterestedConsumers(hidAdvertisementID.value + ',' + hidAssociateID.value + ',' + 1 + ',' + 0);
                                                                                            
                                                                                            $("#choose-consumer").modal("hide");
                                                                                            $("#msg" + hidpanelID.value).css("display", "block");
                                                                                           
                                                                                            setTimeout(function () {
                                                                                                window.location.reload();
                                                                                            }, 200);
                                                                                            //
                                                                                        }
                                                                                        else {
                                                                                            $("#choose-consumer").modal("hide");
                                                                                            BookMarkInsert(hidAdvertisementID.value);

                                                                                            
                                                                                        }
                                                                                    }
                                                                                });
                                                                            }
                                                                        },
                                                                        failure: function (response) {
                                                                            alert(response.d + "Fail");
                                                                        },
                                                                        error: function (response) {
                                                                            alert(response.d + "Error...");
                                                                        }
                                                                    });
                                                                }
                                                            }
                                                        });

                                                    }
                                                });
                                            }
                                        }
                                    });
                                }

                            });
                        }
                        else {
                            jQuery.noConflict();
                            $("#loginFailedmsg1").css("display", "block");
                            logfails.value = 2;
                            return false;
                        }
                    }
                });
            }
        });





        function showLoaderLogin() {
            $("#LoadingImageLogin").css("display", "block");
        }
        function hideLoaderLogin() {
            setTimeout(function () {
                $("#LoadingImageLogin").css("display", "none");
            }, 1000);
        }
        $('#btnForgotPasswd1').click(function (e) {
            var sEmail = $('#Forgetusername1').val();
            $.ajax({
                type: "POST",
                url: "ws/AssociateRegistration.asmx/AssociateAccountExists",
                data: "{'EmailID':'" + sEmail + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                async: false,
                success: function (r) {
                    if (r.d.length > 0) {
                        var xmlDoc = $.parseXML(r.d);
                        var xml = $(xmlDoc);
                        var docs = xml.find("associateExists");
                        $.each(docs, function (i, docs) {
                            if ($(docs).find("AccountId").text() != "0") {
                                $.ajax({
                                    type: "POST",
                                    url: "ws/AssociateSignUp.ashx?action=ResetAssociatePassNew&EmailID=" + sEmail + "",
                                    data: "{}",
                                    contentType: "application/json; charset=utf-8",
                                    dataType: "json",
                                    async: false,
                                    success: function (response) {
                                        if (response == "0") {
                                            $('#Notfound1').removeClass("invalid");
                                            $('#Notfound1').addClass("valid");
                                            $("#Notfound1").text("Please check your registered emailID for new password.");
                                            $('#Notfound1').css("display", "block");
                                            $('#Forgetusername1').css("display", "none");
                                            $('#btnForgotPasswd1').css("display", "none");
                                            Forgetusername1.value = "";
                                            return false;
                                        }
                                    },
                                    failure: function (response) {
                                        alert(response + "Fail");
                                        //window.location.reload();
                                    },
                                    error: function (response) {
                                        alert(response + "Error...");
                                        // window.location.reload();
                                    }
                                });
                            }
                            else {
                                $.ajax({
                                    type: "POST",
                                    url: "ws/AssociateRegistration.asmx/ConsumerAccountExists",
                                    data: "{'EmailID':'" + sEmail + "'}",
                                    contentType: "application/json; charset=utf-8",
                                    dataType: "json",
                                    async: false,
                                    success: function (response) {
                                        if (response.d.length > 0) {
                                            var xmlDoc1 = $.parseXML(response.d);
                                            var xml1 = $(xmlDoc1);
                                            var docs1 = xml1.find("consumerExists");
                                            $.each(docs1, function (i, docs1) {
                                                if ($(docs1).find("AccountId").text() == "0") {
                                                    $('#Notfound1').removeClass("valid");
                                                    $('#Notfound1').addClass("invalid");
                                                    $("#Notfound1").text("Please verify your email address and retry again.");
                                                    $('#Notfound1').css("display", "block");
                                                    return false;
                                                }
                                                else {

                                                    $.ajax({
                                                        type: "POST",
                                                        url: "ws/AssociateSignUp.ashx?action=ResetConsumerPassNew&EmailID=" + sEmail + "",
                                                        data: "{}",
                                                        contentType: "application/json; charset=utf-8",
                                                        dataType: "json",
                                                        async: false,
                                                        cache: false,
                                                        success: function (r1) {
                                                            if (r1 == "0") {
                                                                $('#Notfound1').removeClass("invalid");
                                                                $('#Notfound1').addClass("valid");
                                                                $("#Notfound1").text("Please check your registered emailID for new password.");
                                                                $('#Notfound1').css("display", "block");
                                                                $('#Forgetusername1').css("display", "none");
                                                                $('#btnForgotPasswd1').css("display", "none");
                                                                Forgetusername1.value = "";
                                                                return false;
                                                            }
                                                        },
                                                        failure: function (r1) {
                                                            alert(r1.d + "Fail");
                                                            //window.location.reload();
                                                        },
                                                        error: function (r1) {
                                                            alert(r1.d + "Error...");
                                                            // window.location.reload();
                                                        }
                                                    });
                                                }
                                            });
                                        }
                                    },
                                    failure: function (response1) {
                                        alert(response1 + "Fail");
                                    },
                                    error: function (response1) {
                                        alert(response1 + "Error...");
                                    }
                                });
                            }
                        });
                    }

                },
                failure: function (response) {
                    alert(response + "Fail");
                },
                error: function (response) {
                    alert(response + "Error...");
                }
            });
        });




        $("#btnVerification1").click(function () {
            //var uname = EmailAddress.value;
            //var pass = RPassword.value;
            var uname = lbluserName1.value;
            var pass = lblpassword1.value;
            consumerVerification(uname, pass);
        });
        $('#btnresend1').click(function () {
            // var emailID = EmailAddress.value;
            var emailID = lbluserName1.value;
            $.ajax({
                type: "POST", url: "ws/AssociateRegistration.asmx/ResendActivationCode",
                data: "{'EmailID':'" + emailID + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                async: false,
                success: function (r) {
                    if (r.d > 0) {
                        if (r.d >= "1") {
                            $("#lblSuccess2").text("Activation code has been send to your registered Email.");
                        }
                        else {
                        }
                    }
                    else {

                    }
                }
            });
        });



        $("#btnCreateNew").click(function () {
            $("#mailvalidation1").css("display", "none");
            $("#FirstName").value = "";
            $("#EmailAddressReg").value = "";
            $("#RPassword").value = "";
            $("#cPassword").value = "";
            $("#duplicateEmail").css("display", "none");
            $("#mismatchpass1").css("display", "none");
        });

        function showLoaderreg() {
            $("#pageloader1").css("display", "block");
        }
        function hideLoaderreg() {
            setTimeout(function () {
                $("#pageloader1").css("display", "none");
            }, 1000);
        }
        $("#btnRegistration").click(function () {
            var check = ConsumerValid();
            if (check == "1") {
                $(document).on({
                    ajaxStart: function () {
                        showLoader1();
                    },
                    ajaxStop: function () {
                        hideLoader1();
                    }
                });
                var FullName = FirstName.value;
                var emailID = EmailAddressReg.value;
                var password = RPassword.value;
                var mob = mobile.value;
                var Address = "0";
                var ZipCode = "0";
                $.ajax({
                    url: "ws/AssociateSignUp.ashx?action=Consumer&Name=" + FullName + "&EmailID=" + emailID + "&Password=" + password + "&address=" + Address + "&ZipCode=" + ZipCode + "&mobile=" + mob + "",
                    data: "",
                    contentType: false,
                    processData: false,
                    dataType: "json",
                    async: true,
                    type: "POST",
                    cache: false,
                    success: function (response) {
                        if (response >= 1) {
                            jQuery.noConflict();
                            lbluserName1.value = emailID;
                            lblpassword1.value = password;
                            // $('#emailVerification1').modal('show');
                            $('#emailVerification1').modal({ backdrop: 'static', keyboard: false })
                            $('#choose-registration').modal('hide');
                        }
                        if (response == "0") {
                            jQuery.noConflict();
                            $('#choose-registration').modal('hide');
                            $("#lblFailureTitle").text("User Authentication Failed!!")
                            $("#lblFailureDetail").text("This EmailID is not available.Please Try another one.")
                            $('#fail_message').modal('show');
                        }
                        if (response == "-1") {
                            jQuery.noConflict();
                            $('#choose-registration').modal('hide');
                            $("#lblFailureTitle").text("Failure!!")
                            $("#lblFailureDetail").text("OOPS Error ! Please try again.")
                            $('#fail_message').modal('show');
                        }
                    },
                    failure: function (response) {
                        alert(response + "Fail");
                    },
                    error: function (response) {
                        alert(response + "Error...");
                    }
                });
            }
            else {
                logfails.value = 1;
                $("#choose-registration").modal('hide');
                jQuery.noConflict();
                $("#lblFailureTitle").text("Alert!!")
                $("#lblFailureDetail").text(check)
                $('#fail_message').modal('show');
            }
        });
        $(document).on('keypress', '#Password', function (e) {
            if (e.keyCode == 13) {  // detect the enter key
                $("#btnLogin1").click();
            }
        });
        function showLoader1() {
            $("#pageloader1").css("display", "block");
        }
        function hideLoader1() {
            setTimeout(function () {
                $("#pageloader1").css("display", "none");
            }, 1500);
        }
        $('#btnRegistration').css("background-color", "#808080");
        $('#btnRegistration').prop('disabled', true);
        $('#RPassword').prop('disabled', true); //TO DISABLED FORGOT PASSWORD BUTTON
        $('#cPassword').prop('disabled', true); //TO

        $("#RPassword").focusin(function () {
            $("#message1").css("display", "block");
        });
        $("#RPassword").blur(function () {
            $("#message1").css("display", "none");
        });
        $("#EmailAddressReg").change(function (e) {
            var emailID = EmailAddressReg.value;            
            var filter1 = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
            var filter = /^[\w\.]+@/;
            if (!filter.test(emailID)) {
                EmailAddressReg.focus();
                $("#mailvalidation1").text("Invalid special characters are not allowed in user’s email address");
                $("#mailvalidation1").css('display', 'block');
                return false;
            }
            else if (!filter1.test(emailID)) {
                EmailAddressReg.focus();
                $("#mailvalidation1").text("Email is not in correct format.");
                $("#mailvalidation1").css('display', 'block');
                return false;
            }
            else {
                $("#mailvalidation1").css('display', 'none');
                $.ajax({
                    url: "ws/AssociateSignUp.ashx?action=RecordExists&EmailID=" + emailID + "",
                    data: "",
                    contentType: false,
                    processData: false,
                    dataType: "json",
                    async: true,
                    type: "POST",
                    cache: false,
                    beforeSend: function () {
                        showLoader1();
                    },
                    success: function (response) {
                        hideLoader1();
                        if (response >= 1) {
                            $("#duplicateEmail").css('display', 'block');
                            $("#EmailAddressReg").focus();
                        }
                        else {
                            $('#RPassword').prop('disabled', false); //TO DISABLED FORGOT PASSWORD BUTTON
                            $('#cPassword').prop('disabled', false); //TO
                            $("#duplicateEmail").css('display', 'none');
                            $("#RPassword").focus();
                        }
                    },
                    failure: function (response) {
                        alert(response + "Fail");
                    },
                    error: function (response) {
                        alert(response + "Error...");
                    }
                });
            }
        });
        $("#RPassword").keyup(function () {
            $("#message1").css("display", "block");
            var lowerCaseLetters = /[a-z]/g;
            var upperCaseLetters = /[A-Z]/g;
            var numbers = /[0-9]/g;
            if (lowerCaseLetters.test(this.value)) {
                $("#letter1").removeClass("invalid");
                $("#letter1").addClass("valid");
            } else {
                $("#letter1").removeClass("valid");
                $("#letter1").addClass("invalid");
            }
            if (upperCaseLetters.test(this.value)) {
                $("#capital1").removeClass("invalid");
                $("#capital1").addClass("valid");
            }
            else {
                $("#capital1").removeClass("valid");
                $("#capital1").addClass("invalid");
            }
            if (numbers.test(this.value)) {
                $("#number1").removeClass("invalid");
                $("#number1").addClass("valid");
            }
            else {
                $("#number1").removeClass("valid");
                $("#number1").addClass("invalid");
            }
            if ($("#RPassword").val().length < 8) {
                $("#length1").removeClass("valid");
                $("#length1").addClass("invalid");
            } else {
                $("#length1").removeClass("invalid");
                $("#length1").addClass("valid");
            }
            var str = $('#RPassword').val();
            var regex = /[^\w\s]/gi;
            if (regex.test(str) == true) {
                $("#specialcharacter1").removeClass("invalid");
                $("#specialcharacter1").addClass("valid");
            }
            else {
                $("#specialcharacter1").removeClass("valid");
                $("#specialcharacter1").addClass("invalid");

            }
        });
        $(document).on('keypress', '#Password', function (e) {
            if (e.keyCode == 13) {  // detect the enter key
                $("#btnLogin1").click();
            }
        });
        $("#cPassword").change(function (e) {
            if (cPassword.value != RPassword.value) {
                $("#mismatchpass1").css("display", "block");
                $('#btnRegistration').css("background-color", "#808080");
                $('#btnRegistration').prop('disabled', true);
            }
            else {
                $("#mismatchpass1").css("display", "none");
                $('#btnRegistration').css("background-color", "rgb(33, 150, 243)");
                $('#btnRegistration').prop('disabled', false);
            }
        });
        $("#cPassword").keyup(function (e) {
            if (cPassword.value != RPassword.value) {
                $("#mismatchpass1").css("display", "block");
                $('#btnRegistration').css("background-color", "#808080");
                $('#btnRegistration').prop('disabled', true);
            }
            else {
                $("#mismatchpass1").css("display", "none");
                $('#btnRegistration').css("background-color", "rgb(33, 150, 243)");
                $('#btnRegistration').prop('disabled', false);
            }
        });
    });
    function consumerVerification(username, pass) {
        var zipcode = GetParameterValues('zipcode');
        function GetParameterValues(param) {
            var url = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
            for (var i = 0; i < url.length; i++) {
                var urlparam = url[i].split('=');
                if (urlparam[0] == param) {
                    return urlparam[1];
                }
            }
        }
        $.ajax({
            type: "POST", url: "ws/ConsumerRegistration.asmx/GetActivationCode",
            data: "{'username':'" + username + "'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            async: false,
            success: function (r) {
                if (r.d.length > 0) {
                    if (r.d == txtEmailVerification1.value) {
                        $.ajax({
                            type: "POST", url: "ws/ConsumerRegistration.asmx/VerifiedAccount",
                            data: "{'username':'" + username + "'}",
                            contentType: "application/json; charset=utf-8",
                            dataType: "json",
                            async: false,
                            success: function (r1) {
                                if (r1.d.length > 0) {
                                    $.ajax({
                                        type: "POST",
                                        url: "ws/AssociateRegistration.asmx/ConsumerLogin",
                                        data: "{'EmailID':'" + username + "','Password':'" + pass + "'}",
                                        contentType: "application/json; charset=utf-8",
                                        dataType: "json",
                                        async: false,
                                        success: function (response) {
                                            if (response.d.length > 0) {
                                                var xmlDoc1 = $.parseXML(response.d);
                                                var xml1 = $(xmlDoc1);
                                                var docs1 = xml1.find("consumerLogin");
                                                $.each(docs1, function (i, docs1) {
                                                    if ($(docs1).find("Id").text() == "-1") {
                                                        $('#choose-login').modal('hide');
                                                        $("#lblFailureTitle").text("User Authentication Failed.");
                                                        $("#lblFailureDetail").text("Please verify your credentials and retry log-in.");
                                                        $('#fail_message').modal('show');
                                                        return false;
                                                    }
                                                    else if ($(docs1).find("Flag").text() == "1") {
                                                        $.ajax({
                                                            type: "POST",
                                                            url: "ws/AssociateRegistration.asmx/ConsumerLoginSessionActivate",
                                                            data: "{'username':'" + username + "','assoID':'" + $(docs1).find("Id").text() + "'}",
                                                            contentType: "application/json; charset=utf-8",
                                                            dataType: "json",
                                                            async: false,
                                                            success: function (r2) {
                                                                if (r2.d == "1") {
                                                                    $.ajax({
                                                                        type: "POST", url: "ws/ConsumerRegistration.asmx/SelectConsumerDetail", data: "{}", contentType: "application/json; charset=utf-8", dataType: "json", async: true,
                                                                        success: function (r) {
                                                                            if (r.d.length > 0) {
                                                                                var xmlDoc = $.parseXML(r.d);
                                                                                var xml = $(xmlDoc);
                                                                                var docs = xml.find("ConsumerDetail");
                                                                                $.each(docs, function (i, docs) {
                                                                                    if ($(docs).find("name").text() == "0") {
                                                                                        e.preventDefault();
                                                                                        jQuery.noConflict();
                                                                                        //$('#completeConsumerProfile').modal('show');
                                                                                        $('#completeConsumerProfile').modal({ backdrop: 'static', keyboard: false });
                                                                                        $("#divFname").css("display", "block");
                                                                                    }
                                                                                    else {
                                                                                        $('#emailVerification1').modal('hide');
                                                                                        hidLogin.value = "1";
                                                                                        if (hidDataModelID.value == "1") {
                                                                                            InterestedConsumers(hidAdvertisementID.value + ',' + hidAssociateID.value + ',' + 2 + ',' + zipcode, hidpanelID.value);
                                                                                           // $("#choose-consumer").modal("hide");
                                                                                            $("#msg" + hidpanelID.value).css("display", "block");
                                                                                            // alert("2");
                                                                                            setTimeout(function () {
                                                                                                window.location.reload();
                                                                                            }, 2000);

                                                                                        }
                                                                                        else {

                                                                                            BookMarkInsert(hidAdvertisementID.value);
                                                                                        }
                                                                                        // window.location.reload();
                                                                                    }
                                                                                });
                                                                            }
                                                                        },
                                                                        failure: function (response) {
                                                                            alert(response.d + "Fail");
                                                                        },
                                                                        error: function (response) {
                                                                            alert(response.d + "Error...");
                                                                        }
                                                                    });
                                                                }
                                                            }
                                                        });
                                                    }
                                                    else {
                                                        $('#choose-login').modal('hide');
                                                        $("#lblFailureTitle").text("User Authentication Failed.");
                                                        $("#lblFailureDetail").text("Please verify your credentials and retry log-in.");
                                                        $('#fail_message').modal('show');
                                                    }
                                                });

                                            }
                                        },
                                        failure: function (response) {
                                            alert(response.d + "Fail");
                                        },
                                        error: function (response) {
                                            alert(response.d + "Error...");
                                        }
                                    });

                                }
                                else {
                                    //$('#choose-login').modal('hide');
                                    //$("#lblFailureTitle").text("Failure.");
                                    //$("#lblFailureDetail").text("Verification code does not match. Please Login your registered Email ID to see verification code.");
                                    //$('#fail_message').modal('show');
                                    alert("Verification code does not match. Please Login your registered Email ID to see verification code.");
                                    return false;
                                }

                            },
                            failure: function (response) {
                                alert(response.d + "Fail");
                            },
                            error: function (response) {
                                alert(response.d + "Error...");
                            }
                        });
                    }
                    else {
                        alert("Verification code does not match. Please Login your registered Email ID to see verification code.");
                        return false;
                    }
                }
                else {
                    alert("Verification code does not match. Please Login your registered Email ID to see verification code.");
                    return false;
                }
            }
        });
    }
    function BindServiesList(zipc, CategoryID, CatName) {
        $.ajax({
            type: "POST", url: "ws/TopSearch.asmx/SelectServicesListData",
            data: "{'zipcode':" + zipc + ",'Category':" + CategoryID + "}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            async: false,
            success: function (r1) {
                if (r1.d.length > 0) {
                    var cnt = 1;
                    var xmlDoc1 = $.parseXML(r1.d);
                    var xml1 = $(xmlDoc1);
                    var docs = xml1.find("GetServicesList");
                    var cartd = [];
                    $.each(docs, function (i, docs) {
                        cartd.push("<div class='panel panel-default advertise_list bookmarklist'>");
                        cartd.push("<div class='panel-body'>");
                        cartd.push("<div class='row'>");
                        cartd.push("<a href='#'>");
                        cartd.push("<div class='col-sm-3 advertise-thumb'>");
                        cartd.push("<img src='AssociatePhoto/" + ($(docs).find("photo").text()) + "' class='img-responsive'/>");
                        cartd.push("</div>");
                        cartd.push("<div class='col-sm-5'>");
                        var _lstName;
                        if (($(docs).find("LName").text()) == "0") {
                            _lstName = "";
                        }
                        else {
                            _lstName = ($(docs).find("LName").text());
                        }
                        cartd.push("<h3>" + ($(docs).find("Name").text()) + " " + ($(docs).find("LName").text()) + " </h3>");
                        // cartd.push("<h3>" + ($(docs).find("Name").text()) + " </h3>");
                        cartd.push("<h3> " + ($(docs).find("cityID").text()) + ",     " + ($(docs).find("StateID").text()) + "     " + $(docs).find("zipcode").text() + " </h3>");
                        hidAssociateID.value = ($(docs).find("associateid").text());
                        cartd.push("<ul>");
                        cartd.push("<li>License # " + ($(docs).find("LicenseId").text()) + "  </li>");
                        cartd.push("<li> Associate ID : " + ($(docs).find("associateid").text()) + "  </li>");
                        cartd.push("<li> <strong> " + CatName + "  Services </strong> </li>");
                        cartd.push("</ul>");
                        cartd.push("</div>");
                        cartd.push("</a>");
                        cartd.push("<div class='col-sm-4 pos-rel pull-right padd-t50'>");
                        cartd.push(" <p id=msg" + cnt + " style='display:none' class='text-primary pos-right-message  message-box'>" + ($(docs).find("Name").text()) + " has been notified.<br /> For Additional Questions, please contact <br> support at 866.456.7331.<br>  </p>");
                        cartd.push("<span class='price'>Zipcode:- " + $(docs).find("zipcode").text() + " </span>");
                        if (hidLogin.value == "0") {
                            //cartd.push("<a class='btn btn-block btn-primary' href='#' data-toggle='modal' data-yourparameter='1' data-target='#choose-consumer'> Contact Associate </a><a class='btn btn-block btn-primary' href='#' data-toggle='modal' data-yourparameter='2' data-target='#choose-consumer'><i class='fa fa-bookmark-o'></i> Bookmark </a>");
                            cartd.push("<input type='button' class='btn btn-block btn-primary'    onclick=showinterest1(" + CategoryID + "," + $(docs).find("associateid").text() + ",2," + $(docs).find("zipcode").text() + "," + cnt + ",1) value='Contact Associate'> <button class='btn btn-block btn-primary' onclick=showinterest1(" + CategoryID + "," + $(docs).find("associateid").text() + ",2," + $(docs).find("zipcode").text() + "," + cnt + ",2)><i class='fa fa-bookmark-o'></i>    Bookmark </button> ");
                        }
                        else {
                            cartd.push("<button class='btn btn-block btn-primary' onclick=InterestedConsumers('" + CategoryID + "," + $(docs).find("associateid").text() + ",2," + $(docs).find("zipcode").text() + "'," + cnt + ") id='btnContactAssociate'> Contact Associate </button><button onclick=BookMarkInsert('" + CategoryID + "') class='btn btn-block btn-primary btn-default enabled'> <i class='fa fa-bookmark-o'></i>  Bookmark </button>");
                        }
                        //cartd.push(" <button class='btn btn-block btn-primary'> Contact Associate </button>");
                        //cartd.push("<button class='btn btn-block btn-primary'> <i class='fa fa-bookmark-o'></i>  Bookmark </button>");
                        cartd.push("</div>");
                        cartd.push("</div>");
                        cartd.push("</div>");
                        cartd.push("</div>");
                        //cartd.push("<a href='ServiceProfileList.html?ca=0&id=" + ($(docs).find("ID").text()) + "&zipcode=" + $(docs1).find("zipcode").text() + "&name=" + ($(docs).find("name").text()) + "&jtype=Services&catName=" + ($(docs).find("categoryName").text()) + "'>");
                        //cartd.push("<span><i><img src='AssociatePhoto/" + ($(docs1).find("photo").text()) + "'  alt=''/></i></span></a></div></div>");
                        cnt = cnt + 1;

                    });

                    $("#divAdtsDetail").html(cartd.join(''));
                }
            }
        });

    }
    function showinterest1(advId, assID, jobtype, zipcode, pnlID, contactorbookmark) {
        hidAdvertisementID.value = advId;
        hidAssociateID.value = assID;
        hidjobtypeID.value = jobtype;
        hidZipcodeID.value = zipcode;
        hidpanelID.value = pnlID;
        hidDataModelID.value = contactorbookmark;
        jQuery.noConflict();
        $('#choose-consumer').modal({ display: 'show', backdrop: 'static', keyboard: false });
    }
    function InterestedConsumers(dyr, pnlID) {
        var CompulsoryData = CheckConsumerEmailAndMobileExists();
        if (CompulsoryData == "0") {
            jQuery.noConflict();
            $("#lblFailureTitle").text("You cannot contact this Associate at this time");
            $("#lblFailureDetail").text("Your phone number and email address are required to contact an Associate.Please update your profile and enter your phone number");
            $('#fail_message').modal('show');
            //alert("You need to go to Profile page and update your Mobile No.");
            //return false;
        }
        else {
            if (hidLogin.value == "0")
            { }
            else if (hidLogin.value == "1") {
                var dd = ContactAssociate(dyr);
                if (dd == "1") {
                    $("#btnContactAssociate").css("visibility", "disabled");
                    $("#msg" + pnlID).css("display", "block");
                    //setTimeout(function () {
                    //    $('#msg' + pnlID).fadeOut('fast');
                    //}, 6000);
                }
                else if (dd == "0") {
                    alert("Already Exists");
                }
                else if (dd == "3") {
                    alert("OOPS Error ! Please try again.");
                }
                //window.location.reload();
            }
            else { }
        }
    }


    function ContactAssociate(dynar) {
        var _returnValue;
        var adverID;
        var associateID;
        var jobtypeID;
        var zipcode;
        var array = dynar.split(",");
        for (var i in array) {
            if (i == 0) {
                if (array[i] == '') {
                }
                else {
                    adverID = array[i];
                }
            }
            else if (i == 1) {
                if (array[i] == '') {
                }
                else {
                    associateID = array[i];
                }
            }
            else if (i == 2) {
                if (array[i] == '') {
                }
                else {
                    jobtypeID = array[i];
                }
            }
            else if (i == 3) {
                if (array[i] == '') {
                }
                else {
                    zipcode = array[i];
                }
            }
        }
        $.ajax({
            type: "POST",
            url: "ws/ConsumerComments.asmx/InsertConsumerInterest",
            data: "{'AdvertisementID':" + adverID + ",'AssociateID':" + associateID + ",'jobType':" + jobtypeID + ",'zipcode':" + zipcode + "}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            async: false,
            cache: false,
            success: function (r) {
                $.ajax({
                    type: "POST",
                    url: "ws/ConsumerComments.asmx/SendConsumerDetail",
                    data: "{'associateID':" + associateID + ",'advertisementID':" + adverID + ",'jobtype':" + jobtypeID + ",'zipcode':" + zipcode + "}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    cache: false,
                    success: function (response) {
                        _returnValue = r.d;
                    },
                    failure: function (response) {
                        alert(response.d + "Fail");
                    },
                    error: function (response) {
                        alert(response.d + "Error...");
                    }
                });
            },
            failure: function (response) {
                alert(response.d + "Fail");
            },
            error: function (response) {
                alert(response.d + "Error...");
            }
        });

        return _returnValue;



    }
    function BookMarkInsert(AdvID) {
        var zipcode = GetParameterValues('zipcode');
        function GetParameterValues(param) {
            var url = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
            for (var i = 0; i < url.length; i++) {
                var urlparam = url[i].split('=');
                if (urlparam[0] == param) {
                    return urlparam[1];
                }
            }
        }
        if (hidLogin.value == "0")
        { }
        else if (hidLogin.value == "1") {
            $.ajax({
                type: "POST", url: "ws/ConsumerRegistration.asmx/ConsumerIsLogin", data: "{}", contentType: "application/json; charset=utf-8", dataType: "json", async: false,
                success: function (r) {
                    if (r.d > 0) {
                        $.ajax({
                            type: "POST", url: "ws/InnerPage.asmx/InsertSavedAdts", data: "{'AdvertisementID':" + AdvID + ",'zipCode':" + zipcode + ",'jtype':'2'}", contentType: "application/json; charset=utf-8", dataType: "json", async: false,
                            success: function (r) {
                                if (r.d == "0") {
                                    jQuery.noConflict();
                                    $("#lblFailureTitle").text("Already Saved!!");
                                    $("#lblFailureDetail").text("You have already Saved This Advertisement.");
                                    $('#fail_message').modal('show');
                                    setTimeout(function () {
                                        window.location.reload();
                                    }, 2000);
                                }
                                else {
                                    jQuery.noConflict();
                                    $("#lblSuccess").text("Success!!");
                                    $("#lbldetail").text("You have Succesfully Saved this Advertisements.");
                                    $('#success-message').modal('show');
                                    setTimeout(function () {
                                        window.location.reload();
                                    }, 2000);
                                }
                            }
                        });
                    }
                    else {
                        jQuery.noConflict();
                        $("#lblFailureTitle").text("Failure");
                        $("#lblFailureDetail").text("Please log in to bookmark this advertisement.");
                        $('#fail_message').modal('show');
                        setTimeout(function () {
                            window.location.reload();
                        }, 2000);
                    }
                }
            });
        }
        else { }
    }

    function ConsumerValid() {
        var returnValue;
        // var filter = /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
        var filter = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
        if (FirstName.value == "") {
            returnValue = "Name required";
            $("#FirstName").focus();
        }
        else if (!filter.test($('#EmailAddressReg').val())) {
            returnValue = "Email is not Valid";
            $("#EmailAddressReg").focus();
        }
        else if (RPassword.value == "") {
            returnValue = "Password is Required";
            $("#RPassword").focus();
        }
        else if (cPassword.value != RPassword.value) {
            returnValue = "Password does not match";
            $("#cPassword").focus();
        }
        else {
            returnValue = "1";
        }
        return returnValue;
    }
</script>